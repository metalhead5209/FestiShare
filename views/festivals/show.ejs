<% layout('layouts/boilerplate') %> 


    <div class="row mt-5 mb-3">
        <div class="col-6">
            <div class="card mb-4">
                <img src="<%= festival.image%>" class="card-img-top" alt="fest">
                <div class="card-body">
                  <h5 class="card-title"><%= festival.title %></h5>
                  <p class="card-text text-muted"><%= festival.location%></p>
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item"><%= festival.description %></li>
                  <li class="list-group-item">$<%= festival.price %>/ticket</li>
                </ul>
                <% if(currentUser && festival.contributor.equals(currentUser._id)) {%> 
                <div class="card-body d-flex justify-content-sm-evenly">
                  <a href="/festivals/<%=festival._id%>/edit" class="card-link btn btn-secondary mr-2">Edit</a>
                  <form action="/festivals/<%=festival._id%>?_method=DELETE" method="POST">
                    <button class="btn btn-danger">Delete</button>
                </form>
                </div>
                <% } %> 
                
                <div class="card-footer text-muted">
                  Contributor: <%= festival.contributor.username %>
              </div>
                <div class="card-footer text-muted">
                    2 days ago
                </div>
                <a href="/festivals" class="card-link btn btn-info">All Festivals</a>
              </div> 
        </div>
        <div class="col-6">
          <% if(currentUser) {%> 
          <h2>Share your Festival Experience</h2>
              <form action="/festivals/<%=festival._id%>/experiences" method="POST" class="mb-3 needs-validation" novalidate>
                <div class="mb-3">
                  <label class="form-label" for="rating">Rating</label>
                  <input type="range" min="1" max="5" class="form-range" name="experience[rating]" id="rating">
                </div>
                <div class="mb-3">
                  <label class="form-label" for="body">Experience</label>
                  <textarea class="form-control" name="experience[body]" id="body" cols="30" rows="5" required></textarea>
                </div>
                <button class="btn btn-success">Submit</button>
              </form>
              <% } %> 
              <h2>Experiences</h2>
              <% for (let experience of festival.experiences) { %> 
                  <div class="card mb-3">
                    <div class="card-body">
                      <h5 class="card-title">Rating: <%= experience.rating %> </h5>
                      <p class="card-text"><%= experience.body %> </p>
                      <p class="cart-text text-muted"><b>Contributed By: </b><%= experience.contributor.username %></p>
                      <% if(currentUser && experience.contributor.equals(currentUser._id)) {%> 
                      <form action="/festivals/<%=festival._id%>/experiences/<%=experience.id%>?_method=DELETE" method="POST">
                        <button class="btn btn-sm btn-danger">Delete</button>
                      </form>
                      <% } %> 
                    </div>
                </div>
               <% } %>
        </div>
    </div>



    
  